/*! For license information please see 214.9e828b84.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[214],{5136:function(e,s,a){a(2791);s.Z=a.p+"static/media/arrow-down.62ce1cc31b940d051e5a06d4c8177ccf.svg"},7529:function(e,s,a){a(2791);s.Z=a.p+"static/media/arrow-right.f926d159a908b445563073e26e664ca4.svg"},8081:function(e,s,a){a(2791);s.Z=a.p+"static/media/clip.5b44779592dbe7f51d5b74f2ab6e8949.svg"},2214:function(e,s,a){a.r(s),a.d(s,{default:function(){return x}});var r=a(1413),t=a(4165),n=a(5861),c=a(9439),i=a(2791),o=a(9434),_=a(6871),m=a(3504),g=a(8081),l={messages_wrapper:"Messages_messages_wrapper__1ipvH",left_panel:"Messages_left_panel__fxgwD",main:"Messages_main__7BC46",messages:"Messages_messages__8s+pC",message_item_wrapper:"Messages_message_item_wrapper__rTXsX",reverse:"Messages_reverse__0lgce",message_item:"Messages_message_item__5Bsid",message_image:"Messages_message_image__M5PlQ",avatar_wrapper:"Messages_avatar_wrapper__T7+NF",avatar:"Messages_avatar__Hhb0g",message_data:"Messages_message_data__9xkKG",type_message:"Messages_type_message__qN46y",message_author_wrapper:"Messages_message_author_wrapper__D-6kH",message_author:"Messages_message_author__5hLMm",create_message_controls:"Messages_create_message_controls__CgIFe",emojiBlock:"Messages_emojiBlock__aJfYd",emoji:"Messages_emoji__q4GmL",arrow_wrapper:"Messages_arrow_wrapper__g4h0j",emoji_wrapper:"Messages_emoji_wrapper__2GLaP",clip:"Messages_clip__ybJGI",pin_img_url:"Messages_pin_img_url__9pfQa",send_message:"Messages_send_message__WJIpT"},p=a(6876),u=a(7529),d=a(5136),h=a(5158),f=a(3168),v=a(7015),j=a(184),w=a(9951),x=function(){var e=(0,f.$)().t,s=(0,o.I0)(),a=(0,o.v9)((function(e){return e.app.isAuth})),x=(0,o.v9)((function(e){return e.app.photo})),M=(0,o.v9)((function(e){return e.app.user.user_id})),k=(0,o.v9)((function(e){return e.messages.messages})),N={user_id:M,photo:x,message:"",id:Math.random(),event:"message",date:"".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString()),image:""},Z=(0,i.useState)(!1),b=(0,c.Z)(Z,2),y=b[0],C=b[1],S=(0,i.useState)(!0),I=(0,c.Z)(S,2),B=I[0],L=I[1],T=(0,i.useState)(N),q=(0,c.Z)(T,2),D=q[0],E=q[1],G=(0,i.useRef)();(0,i.useEffect)((function(){s((0,v.qz)())}),[]),(0,i.useEffect)((function(){G.current=new WebSocket("ws://dart-social-network.herokuapp.com"),G.current.onopen=function(){console.log("WEBSOCKET OPEN")},G.current.onmessage=function(e){s((0,v.qz)())},G.current.onclose=function(){console.log("Socket \u0437\u0430\u043a\u0440\u044b\u0442")},G.current.onerror=function(){console.log("Socket \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}),[]);var J=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.current.send(JSON.stringify(D)),E(N);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={backgroundImage:x?"url(".concat("https://dart-social-network.herokuapp.com").concat(x,")"):"url(".concat(p,")")};return a?(0,j.jsxs)("div",{className:l.messages_wrapper,children:[(0,j.jsx)("section",{className:l.left_panel,children:"Messages"}),(0,j.jsxs)("section",{className:l.main,children:[(0,j.jsx)("div",{className:l.messages,children:k.map((function(e){return(0,j.jsxs)("div",{className:"".concat(l.message_item_wrapper," ").concat(e.user_id===M&&l.reverse),children:[(0,j.jsx)("div",{className:l.avatar_wrapper,children:(0,j.jsx)(m.OL,{to:e.user_id===M?"/":"/".concat(e.user_id),children:(0,j.jsx)("div",{className:l.avatar,style:{backgroundImage:e.photo?"url(".concat("https://dart-social-network.herokuapp.com").concat(e.photo,")"):"url(".concat(p,")")}})})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"".concat(l.message_item," ").concat(e.user_id===M&&l.right),children:[(0,j.jsx)("p",{children:e.message.trim()}),e.image&&(0,j.jsx)("div",{className:l.message_image,children:(0,j.jsx)("img",{src:e.image,alt:"message img pin",width:100})})]}),(0,j.jsx)("p",{className:l.message_data,children:e.date})]})]},e.id)}))}),(0,j.jsxs)("div",{className:l.send_message,children:[(0,j.jsxs)("div",{className:l.type_message,children:[(0,j.jsx)("div",{className:l.message_author_wrapper,children:(0,j.jsx)("div",{className:l.message_author,style:O})}),(0,j.jsx)("textarea",{cols:30,rows:4,value:D.message,onChange:function(e){return E((0,r.Z)((0,r.Z)({},D),{},{message:e.target.value}))}})]}),y&&(0,j.jsxs)("div",{className:l.pin_img_url,children:[(0,j.jsx)("p",{children:e("posts.enterImgUrl")}),(0,j.jsx)("input",{type:"text",placeholder:"https://example.com/template.png",value:D.image,onChange:function(e){E((0,r.Z)((0,r.Z)({},D),{},{image:e.currentTarget.value}))}})]}),(0,j.jsxs)("div",{className:l.create_message_controls,children:[(0,j.jsxs)("div",{className:l.emoji_wrapper,children:[(0,j.jsx)("div",{className:l.arrow_wrapper,onClick:function(){return L((function(e){return!e}))},children:(0,j.jsx)("img",{src:B?u.Z:d.Z,alt:"arrow"})}),(0,j.jsx)("div",{className:l.emojiBlock,style:B?{height:"20px"}:{height:"114px"},children:w.unicode.map((function(e,s){return(0,j.jsx)("div",{className:l.emoji,onClick:function(){return E((0,r.Z)((0,r.Z)({},D),{},{message:D.message+e}))},children:e},s)}))})]}),(0,j.jsx)("div",{className:l.clip,title:e("posts.pinPicture"),onClick:function(){return C((function(e){return!e}))},children:(0,j.jsx)("img",{src:g.Z,alt:"clip",width:22,height:22})}),(0,j.jsx)(h.q,{width:200,height:40,alignSelf:"self-end",title:e("messages.send"),onClick:J,disabled:""===D.message.trim()})]})]})]})]}):(0,j.jsx)(_.Fg,{to:"/login"})}}}]);
//# sourceMappingURL=214.9e828b84.chunk.js.map